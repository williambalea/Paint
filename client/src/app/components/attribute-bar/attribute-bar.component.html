<div class="attributeBar">
    <div class="actions">
        <button *ngIf='this.undoRedoService.actions.length === 0' mat-button (click)="this.undoRedoService.undo()"
            disabled>
            <mat-icon>undo</mat-icon>
        </button>
        <button *ngIf='this.undoRedoService.actions.length !== 0' mat-button (click)="this.undoRedoService.undo()">
            <mat-icon>undo</mat-icon>
        </button>
        <button *ngIf='this.undoRedoService.poppedActions.length === 0' mat-button (click)="this.undoRedoService.redo()"
            disabled>
            <mat-icon>redo</mat-icon>
        </button>
        <button *ngIf='this.undoRedoService.poppedActions.length !== 0' mat-button
            (click)="this.undoRedoService.redo()">
            <mat-icon>redo</mat-icon>
        </button>

        <div class="actionList">
            <span *ngFor="let action of this.undoRedoService.actions">
                {{action.action}} {{action.shape.tagName}} ({{action.shape.getBBox().x}},
                {{action.shape.getBBox().y}})<br>
            </span>
            <span *ngFor="let action of this.undoRedoService.poppedActions">
                <span style="color: grey">{{action.action}} {{action.shape.tagName}}<br></span>
            </span>
        </div>
    </div>

    <div [ngSwitch]="selectedTool">

        <div *ngSwitchCase="tool.rectangle">
            <app-rectangle-attributes></app-rectangle-attributes>
            <div *ngIf="this.colorService.getShowInAttributeBar()">
                <app-color-picker></app-color-picker>
            </div>
        </div>

        <div *ngSwitchCase="tool.ellipse">
            <app-ellipse-attributes></app-ellipse-attributes>
            <div *ngIf="this.colorService.getShowInAttributeBar()">
                <app-color-picker></app-color-picker>
            </div>
        </div>

        <div *ngSwitchCase="tool.polygon">
            <app-polygon-attributes></app-polygon-attributes>
            <div *ngIf="this.colorService.getShowInAttributeBar()">
                <app-color-picker></app-color-picker>
            </div>
        </div>

        <div *ngSwitchCase="tool.brush">
            <app-brush-attributes></app-brush-attributes>
            <div *ngIf="this.colorService.getShowInAttributeBar()">
                <app-color-picker></app-color-picker>
            </div>
        </div>

        <div *ngSwitchCase="tool.text">
            <app-text-attributes></app-text-attributes>
            <div *ngIf="this.colorService.getShowInAttributeBar()">
                <app-color-picker></app-color-picker>
            </div>
        </div>

        <div *ngSwitchCase="tool.pencil">
            <app-pencil-attributes></app-pencil-attributes>
            <div *ngIf="this.colorService.getShowInAttributeBar()">
                <app-color-picker></app-color-picker>
            </div>
        </div>

        <div *ngSwitchCase="tool.pen">
            <app-pen-attributes></app-pen-attributes>
            <div *ngIf="this.colorService.getShowInAttributeBar()">
                <app-color-picker></app-color-picker>
            </div>
        </div>

        <div *ngSwitchCase="tool.line">
            <app-line-attributes></app-line-attributes>
            <div *ngIf="this.colorService.getShowInAttributeBar()">
                <app-color-picker></app-color-picker>
            </div>
        </div>

        <div *ngSwitchCase="tool.colorApplicator">
            <app-color-applicator-attributes></app-color-applicator-attributes>
            <div *ngIf="this.colorService.getShowInAttributeBar()">
                <app-color-picker></app-color-picker>
            </div>
        </div>

        <div *ngSwitchCase="tool.grid">
            <div class="header">Grid</div>

            <div>

                <div class="svgGrid">
                    <svg width="200" height="200">
                        <rect [attr.x]="100 - this.gridService.gridSize/2" [attr.y]="100 - this.gridService.gridSize/2"
                            [attr.width]="this.gridService.gridSize" [attr.height]="this.gridService.gridSize"
                            fill="none" stroke="red" stroke-width="1" />
                    </svg>
                </div>

                <div class="attribute">
                    <div class="attributeHeader">
                        Grid size: {{this.gridService.gridSize}} <br>
                    </div>
                    <mat-slider class="inputFormStyle" type="range" #slider min="40" max="200"
                        value={{this.gridService.gridSize}} [(ngModel)]="this.gridService.gridSize"
                        (input)="this.gridService.gridSize = $event.value; applyGrid(); showGrid()">
                    </mat-slider>
                    <div class="attributeHeader">
                        Toggle Grid<br>
                        <mat-slide-toggle [checked]="usingGrid" (change)="onGridToggle($event.checked)">
                        </mat-slide-toggle>
                    </div>
                </div>

                <div class="attribute">
                    <div class="attributeHeader">
                        Opacity: {{this.gridService.opacity}} % <br>
                    </div>
                    <div class="button">
                        <mat-slider min="25" max="100" value={{this.gridService.opacity}}
                            [(ngModel)]="this.gridService.opacity"
                            (input)="this.gridService.opacity = $event.value; applyGrid(); showGrid()">
                        </mat-slider>
                    </div>
                </div>
            </div>
            <div *ngIf="this.colorService.getShowInAttributeBar()">
                <app-color-picker></app-color-picker>
            </div>
        </div>

        <div *ngSwitchCase="tool.eraser">
            <app-eraser-attributes></app-eraser-attributes>
            <div *ngIf="this.colorService.getShowInAttributeBar()">
                <app-color-picker></app-color-picker>
            </div>
        </div>


        <div *ngSwitchCase="tool.stamp">
            <app-stamp-attributes></app-stamp-attributes>
        </div>

    </div>

</div>